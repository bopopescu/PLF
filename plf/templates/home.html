{% extends "base.html" %}

{% block header %}Home{% endblock %}

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
{% block content %}
<u1 id="filters">
  <li><a href="#" data-filter="*">show all</a></li>
  <li><a href="#" data-filter=".lost">lost</a></li>
  <li><a href="#" data-filter=".found">found</a></li>
</u1>

<input id="search" type="text" name="search" value="Search">

	<p>Recent items:</p>

  <!-- for loop that displays info about each item -->
	<div id="container">
		{% for item in items %}
      {% if item.status == True %}
        <div class="masonryImage lost">
        <p>LOST</p>
      {% else %}
        <div class="masonryImage found">
        <p>FOUND</p>
      {% endif %}

      {% if item.picture %}
      <img src="..{{ item.picture.url }}" />
      {% endif %}

			<p>Description: {{ item.desc }}</p>
			<p>Category: {{ item.category  }}</p>
			<p>Location: {{ item.location }}</p>

			<form action="" method="post">{% csrf_token %}
				<input type="hidden" value="{{ item.id }}" name="identity">
        <input type="hidden" value="{{ item.status }}" name="status">
		        <p>Your e-mail: <input type="text" name="email"></p>
                              {% if item.status == True %}
		        <input type="submit" value="I Found This!">
                              {% else %}
                              <input type="submit" value="This is mine!">
                              {% endif %}
		    </form>
      </div>
  	{% endfor %}
  </div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="../media/jquery.isotope.min.js"></script>
<script>

$(function() {

  var $container = $('#container');
  $container.imagesLoaded( function() {
    var $search = $('#search');
    original_val = $search.val();
    $search.focus(function(){ //When the user tabs/clicks the search box.
      if($(this).val()===original_val){ //If the value is still the default, in this case, "Search" 
        $(this).val(''); //If it is, set it to blank
      }
    })
    .blur(function(){//When the user tabs/clicks out of the input
      if($(this).val()===''){//If the value is blank (such as the user clicking in it and clicking out)...  
        $(this).val(original_val); //... set back to the original value
      }
    });

    $search.keypress(function (e) {
       if (e.which == 13) {

         /* do the searching here */

         alert($(this).val());
         return false;
       }
    });  

    $container.isotope({

    });

    $('#filters a').click(function(){
      var selector = $(this).attr('data-filter');
      $container.isotope({ filter: selector });
      return false;
    });

  });
});

</script>

{% endblock %}
