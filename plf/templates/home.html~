{% extends "base.html" %}

{% block header %}Home{% endblock %}

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>  
{% block content %}
<u1 id="filters">
  <li><a href="#" data-filter="*">show all</a></li>
  <li><a href="#" data-filter=".lost">lost</a></li>
  <li><a href="#" data-filter=".found">found</a></li>
</u1>

<<<<<<< HEAD
<form id="live-search" action="" class="styled" method="post">
  <fieldset>
    <input type="text" class="text-input" id="filter" value="" />
    <span id="filter-count"></span>
  </fieldset>
</form>


=======
<input id="search" type="text" name="search" value="Search">
>>>>>>> working JSON
	<p>Recent items:</p>
	<div id="container">
		{% for item in items %}
                                {% if item.status == True %}
                                    <div class="masonryImage lost">
                                    <p>LOST</p>
                                {% else %}
                                    <div class="masonryImage found">
                                    <p>FOUND</p>
                                {% endif %}
                                {% if item.picture %}
                                <img src="..{{ item.picture.url }}" />
                                {% endif %}
				<p>Description: {{ item.desc }}</p>
				<p>Category: {{ item.category  }}</p>
				<p>Location: {{ item.location }}</p>

				<form action="" method="post">{% csrf_token %}
					<input type="hidden" value="{{ item.id }}" name="identity">
			        <p>Your e-mail: <input type="text" name="email"></p>
                                {% if item.status == True %}
			        <input type="submit" value="I Found This!">
                                {% else %}
                                <input type="submit" value="This is mine!">
                                {% endif %}
			    </form>
                </div>
	{% endfor %}
        </div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="../media/jquery.isotope.min.js"></script>
<script>

$(function testAjax() {

<<<<<<< HEAD
    });

    $('#filters a').click(function(){
      var selector = $(this).attr('data-filter');
      $container.isotope({ filter: selector });
      return false;
    });

  });
=======
});

$(function() {

   var $container = $('#container');
   $container.imagesLoaded( function() {

      var $search = $('#search');
      original_val = $search.val();
      $search.focus(function(){
         if($(this).val()===original_val){
           
            $(this).val('');
         }
      })
      .blur(function(){
         if($(this).val()===''){
           $(this).val(original_val);
         }
      });
      $search.keypress(function (e) {
         if (e.which == 13) {
           /* do the searching here */
           /* make the http request for json data, then parse */
           $.ajax({
              url: 'data/',
              datatype: 'json',
              type: "GET",
                 success: function(ret) {
                    /*alert("Data received");*/
                 }
           });
           alert(ret);

           for (var i = 0; i < data.length; i++) {
             if (data[i].Item.category == $(this).val()) {
                alert($(this).val());
             }
           }
//           alert($(this).val());
           return false;
         }
      });  

      $container.isotope({

      });

      $('#filters a').click(function(){
        var selector = $(this).attr('data-filter');
        $container.isotope({ filter: selector });
        return false;
      });
   });
>>>>>>> working JSON
});

</script>

{% endblock %}
